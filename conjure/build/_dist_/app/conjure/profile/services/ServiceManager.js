import t from"./discord/ProfileServiceDiscord.js";export default class c{constructor(e){this.conjure=e,this.services={},this.addService(new t(this))}getServiceAsJson(){let e={};for(let s of Object.keys(this.services))e[s]=this.services[s].toJson();return e}addService(e){this.services[e.getName()]=e}linkService(e){this.services[e].link()}unlinkService(e){this.services[e].unlink()}getServiceLinked(e){return this.services[e].getAuthenticated()}getService(e){return this.services[e]}refreshServices(){this.conjure.getScreens().screenServices.selectService()}async initialiseServices(){for(let e of Object.values(this.services))await e.initialise()&&(e.isInitialised=!0);this.conjure.getScreens().screenServices.addServices()}async getPotentialRealms(){let e=[];for(let s of Object.values(this.services))e.push(...await s.getRealms());return e}async getRealmsFromConnectedServices(e){for(let s of Object.values(this.services)){let i=await s.getRealms();for(let r in i)await this.conjure.realms.getRealmById(i[r].id)&&e(i[r])}}setServicesFromDatabase(e){for(let s of Object.keys(e))this.getService(s)&&this.getService(s).readFromJson(e[s])}}
