import i from"./User.js";import s from"../screens/text/TextRenderer3D.js";import*as r from"https://cdn.skypack.dev/pin/three@v0.117.1-NetLzdTnw9ga3y6o633U/min/three.js";const a={CONNECT:0,DISCONNECT:1,UPDATE:2,MOVE:3,ANIMATION:4};export default class n extends i{constructor(t,e,o){super(t,!0);this.peerID=o,this.velocity=new r.Vector3,console.log(e),this.username=e.username,this.group.name=e.username,this.nameplate=new s(t,this.group,{text:this.username}),this.nameplate.group.position.setY(2),this.nameplate.group.rotation.set(0,Math.PI,0),this.nameplate.group.visible=this.username!=="undefined"&&this.username!=="",this.timeoutLimit=603*60,this.timeoutCount=0}onCreate(){super.onCreate()}updateInfo(t){this.timeoutCount=0,t.username&&(this.username=t.username,this.nameplate.setText(this.username),this.nameplate.group.visible=this.username!=="undefined"&&this.username!=="")}update(t){if(this.timeoutCount++,this.timeoutCount>this.timeoutLimit){console.log(this.group.name+" has timed out"),this.conjure.getWorld().onUserLeave(this.peerID);return}this.group.position.set(this.group.position.x+this.velocity.x*t.delta,this.group.position.y+this.velocity.y*t.delta,this.group.position.z+this.velocity.z*t.delta)}setPhysics(t){this.timeoutCount=0,this.group.position.set(t.position.x,t.position.y,t.position.z),this.group.quaternion.set(t.rotation.x,t.rotation.y,t.rotation.z,t.rotation.w),this.velocity.set(t.velocity.x,t.velocity.y,t.velocity.z)}destroy(){}}
