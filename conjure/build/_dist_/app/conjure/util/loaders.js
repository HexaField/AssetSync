import{RGBAFormat as i,FileLoader as n,ImageBitmapLoader as d}from"https://cdn.skypack.dev/pin/three@v0.117.1-NetLzdTnw9ga3y6o633U/min/three.js";import{FBXLoader as h}from"../../../../web_modules/three/examples/jsm/loaders/FBXLoader.js";import{GLTFLoader as c}from"../../../../web_modules/three/examples/jsm/loaders/GLTFLoader.js";import{SVGLoader as m}from"../../../../web_modules/three/examples/jsm/loaders/SVGLoader.js";import{TextureLoader as L}from"./BitmapTextureLoader.js";export default class p{constructor(e,t){this.cache=e,this.textureAnisotropy=t,this.fileLoader=new n,this.imgLoader=new d,this.svgLoader=new m,this.textureLoader=new L,this.gltfLoader=new c,this.fbxLoader=new h}async preload(e,t){return this.cache.add(e,t),new Promise(o=>{const s=/\.fbx$|\.glb$|\.gltf$/.test(t),a=/\.jpe?g$|\.png$/.test(t);a?this.textureLoader.load(t,r=>o(r)):(s&&this.fileLoader.setResponseType("arraybuffer"),this.fileLoader.load(t,r=>o(r)))})}async file(e){const t=this.cache.get(e);return e=t||e,new Promise(o=>{this.fileLoader.load(e,s=>o(s))})}async svg(e){const t=this.cache.get(e);return e=t||e,new Promise(o=>{this.svgLoader.load(e,s=>o(s))})}async texture(e){const t=this.cache.get(e);return e=t||e,new Promise(o=>{this.textureLoader.load(e,s=>{s.anisotropy=this.textureAnisotropy,s.format=i,s.needsUpdate=!0,s.anisotropy=this.textureAnisotropy,o(s)})})}async gltf(e){const t=this.cache.get(e);return e=t||e,new Promise(o=>{this.gltfLoader.load(e,s=>{o(s)})})}async fbx(e){const t=this.cache.get(e);return e=t||e,new Promise(o=>{this.fbxLoader.load(e,s=>{o(s)})})}}
