import*as t from"https://cdn.skypack.dev/pin/three@v0.117.1-NetLzdTnw9ga3y6o633U/min/three.js";export default class e{constructor(s,o,h={}){this.conjure=s,this.roomWidth=h.roomWidth||10,this.roomHeight=h.roomHeight||4,this.roomLength=h.roomLength||16;let i=.1;this.group=new t.Group,o.add(this.group),this.wallMaterial=new t.MeshStandardMaterial({side:t.DoubleSide,roughness:.8,color:16777215,metalness:.2,bumpScale:5e-4}),this.floor=new t.Group,this.floor.add(new t.Mesh(new t.PlaneBufferGeometry(this.roomWidth,this.roomLength,i),this.wallMaterial)),this.floor.rotateX(Math.PI/2),this.group.add(this.floor),s.physics.add.existing(this.floor,{shape:"plane",collider:{margin:.01},collisionFlags:1,mass:0}),this.ceiling=new t.Group,this.ceiling.add(new t.Mesh(new t.PlaneBufferGeometry(this.roomWidth,this.roomLength,i),this.wallMaterial)),this.ceiling.position.setY(this.roomHeight),this.ceiling.rotateX(Math.PI/2),this.group.add(this.ceiling),s.physics.add.existing(this.ceiling,{shape:"plane",collider:{margin:.01},collisionFlags:1,mass:0}),this.wallNorth=new t.Group,this.wallNorth.add(new t.Mesh(new t.PlaneBufferGeometry(this.roomWidth,this.roomHeight,i),this.wallMaterial)),this.wallNorth.position.set(0,this.roomHeight/2,this.roomLength/2),this.group.add(this.wallNorth),s.physics.add.existing(this.wallNorth,{shape:"plane",collider:{margin:.01},collisionFlags:1,mass:0}),this.wallSouth=new t.Group,this.wallSouth.add(new t.Mesh(new t.PlaneBufferGeometry(this.roomWidth,this.roomHeight,i),this.wallMaterial)),this.wallSouth.position.set(0,this.roomHeight/2,-this.roomLength/2),this.group.add(this.wallSouth),s.physics.add.existing(this.wallSouth,{shape:"plane",collider:{margin:.01},collisionFlags:1,mass:0}),this.wallEast=new t.Group,this.wallEast.add(new t.Mesh(new t.PlaneBufferGeometry(this.roomLength,this.roomHeight,i),this.wallMaterial)),this.wallEast.position.set(this.roomWidth/2,this.roomHeight/2,0),this.wallEast.rotateY(Math.PI/2),this.group.add(this.wallEast),s.physics.add.existing(this.wallEast,{shape:"plane",collider:{margin:.01},collisionFlags:1,mass:0}),this.wallWest=new t.Group,this.wallWest.add(new t.Mesh(new t.PlaneBufferGeometry(this.roomLength,this.roomHeight,i),this.wallMaterial)),this.wallWest.position.set(-this.roomWidth/2,this.roomHeight/2,0),this.wallWest.rotateY(Math.PI/2),this.group.add(this.wallWest),s.physics.add.existing(this.wallWest,{shape:"plane",collider:{margin:.01},collisionFlags:1,mass:0})}destroy(){this.conjure.physics.destroy(this.floor.body),this.conjure.physics.destroy(this.ceiling.body),this.conjure.physics.destroy(this.wallNorth.body),this.conjure.physics.destroy(this.wallSouth.body),this.conjure.physics.destroy(this.wallEast.body),this.conjure.physics.destroy(this.wallWest.body),this.group.parent.remove(this.group)}}
