import*as i from" https://cdn.skypack.dev/pin/three@v0.123.0-STd7XeVUbImsNuMmqKGL/min/three.js";import{easyPlane as h}from"../../util/MeshTemplates.js";import r from"../text/TextRenderer3D.js";import n from"./ScreenElementBase.js";import s from"./ScreenElementButton.js";export default class l extends n{constructor(e,t,a={}){super(e,t,a);this.frameBorder=.1,this.plane=new i.Plane,this.worldPosition=new i.Vector3,this.intersection=new i.Vector3,this.background=h({width:this.width,height:this.height},{color:2524671}),this.background.material.transparent=!0,this.background.material.opacity=.5,this.group.add(this.background),this.changePage=this.changePage.bind(this),this.currentPage=0,this.lastPageButton=new s(e,this,{x:-.18,y:-this.height/2+this.frameBorder+.05,z:.1,width:.25,height:.15}),this.lastPageButton.setOnClickCallback(this.changePage,-1),this.lastPageButton.setText("Last"),this.registerElement(this.lastPageButton),this.currentPageText=new r(e.screenManager.conjure,this.group,{text:""+this.currentPage,scale:.75}),this.currentPageText.group.position.setY(-height/2+this.frameBorder+.05),this.currentPageText.group.position.setZ(.2),this.nextPageButton=new s(e,this,{x:.18,y:-this.height/2+this.frameBorder+.05,z:.1,width:.25,height:.15}),this.nextPageButton.setOnClickCallback(this.changePage,1),this.nextPageButton.setText("Next"),this.registerElement(this.nextPageButton),this.currentPage=0,this.iterator=0,this.verticalFit=3,this.pageElements=[]}registerItem(e){e.group.position.y=this.height/2-.15-.3*this.iterator,this.iterator++,this.pageElements.push(e),e.setHTMLActive(!1),e.setActive(!1),this.iterator>=this.verticalFit&&(this.iterator=0)}setActive(e){super.setActive(e);for(let t=0;t<this.pageElements.length;t++)this.pageElements[t].setHTMLActive(!1),this.pageElements[t].setActive(!1);this.changePage(0)}changePage(e){if(this.pageElements.length===0)return;for(let t=0;t<this.verticalFit;t++)this.pageElements[t+this.verticalFit*this.currentPage]&&this.pageElements[t+this.verticalFit*this.currentPage].setActive(!1);if(!this.active)return;this.currentPage+=e;for(let t=0;t<this.verticalFit;t++)this.pageElements[t+this.verticalFit*this.currentPage]&&this.pageElements[t+this.verticalFit*this.currentPage].setActive(!0);this.currentPage===0?this.lastPageButton.setDisabled(!0):this.lastPageButton.disabled&&this.lastPageButton.setDisabled(!1),this.currentPage>=Math.floor((this.pageElements.length-1)/this.verticalFit)?this.nextPageButton.setDisabled(!0):this.nextPageButton.disabled&&this.nextPageButton.setDisabled(!1),this.currentPageText.setText(this.currentPage+1)}update(e){super.update(e);for(let t=0;t<this.pageElements.length;t++)this.pageElements[t].update(e)}}
