import{isNode as e,EventDispatcher as i}from"../../web_modules/@AssetSync/common.js";import o from"./backend/Assets.js";import a from"./backend/Realms.js";import n from"./backend/Profiles.js";export default async function(s){new r(s)}class r extends i{constructor({assetSync:s,worldSync:t}){super();t.addFunction("requestPointerLock"),t.addFunction("exitPointerLock"),t.addFunction("hasFocus"),this.assetSync=s,this.worldSync=t,this.start()}async start(){this.assets=new o(this.assetSync,"asset"),this.realms=new a(this.assetSync),await this.realms.initialise(),this.profiles=new n(this.assetSync),e||this.loadConjure()}async loadConjure(){const{startConjure:s}=await import("./conjure/Conjure.js");s(this)}}
