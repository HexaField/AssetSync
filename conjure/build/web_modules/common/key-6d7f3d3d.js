function K(e,{className:t,symbolName:n}){const r=Symbol.for(n),o={[t]:class extends e{constructor(...s){super(...s);Object.defineProperty(this,r,{value:!0})}get[Symbol.toStringTag](){return t}}}[t];return o[`is${t}`]=s=>!!(s&&s[r]),o}function k(e,{className:t,symbolName:n,withoutNew:r}){const o=Symbol.for(n),s={[t]:function(...l){if(r&&!(this instanceof s))return new s(...l);const h=e.call(this,...l)||this;return h&&!h[o]&&Object.defineProperty(h,o,{value:!0}),h}}[t];return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get(){return t}}),s[`is${t}`]=l=>!!(l&&l[o]),s}var y=K,C=k;y.proto=C;let _="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",f=e=>crypto.getRandomValues(new Uint8Array(e)),m=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*r*t/e.length);return()=>{let s="";for(;;){let l=n(o),h=o;for(;h--;)if(s+=e[l[h]&r]||"",s.length===+t)return s}}},A=(e,t)=>m(e,t,f),S=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=n[e]&63;r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r<63?t+="_":t+="-"}return t};var d=Object.freeze({__proto__:null,nanoid:S,customAlphabet:A,customRandom:m,urlAlphabet:_,random:f});const{nanoid:x}=d,P=(e=t=>t)=>e(x());var T=P;(function(){if(typeof globalThis=="object")return;Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__})();var u=globalThis,M=u.TextEncoder,b=u.TextDecoder,R=new M("utf8"),j=new b("utf8"),z=(e,t)=>async function*(){for await(const n of e){const r=await t(n);if(!r)continue;yield n}}(),J=(e,t)=>async function*(){let n=[];for await(const r of e)n.push(r);n=await t(n);for(const r of n)yield r}(),I=(e,t)=>async function*(){if(t<=0)return;let n=0;for await(const r of e)if(yield r,n++,n>=t)return}(),O=(e,t)=>async function*(){for await(const n of e)yield t(n)}(),D=function(e,t){const n=new RegExp("^"+t);return e.replace(n,"")},E=T,g={utf8Encoder:R,utf8Decoder:j,filter:z,sortAll:J,take:I,map:O,replaceStartWith:D,tmpdir:E};const{nanoid:N}=d,{utf8Encoder:w,utf8Decoder:U}=g,a="/",v=w.encode(a),c=v[0];class p{constructor(e,t){if(typeof e=="string")this._buf=w.encode(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==c)throw new Error("Invalid key")}toString(e="utf8"){return e==="utf8"||e==="utf-8"?U.decode(this._buf):new b(e).decode(this._buf)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new i(e.join(a))}static random(){return new i(N().replace(/-/g,""))}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=v),this._buf[0]!==c){const e=new Uint8Array(this._buf.byteLength+1);e.fill(c,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===c;)this._buf=this._buf.subarray(0,-1)}less(e){const t=this.list(),n=e.list();for(let r=0;r<t.length;r++){if(n.length<r+1)return!1;const o=t[r],s=n[r];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return p.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(a).slice(1)}type(){return W(this.baseNamespace())}name(){return L(this.baseNamespace())}instance(e){return new i(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(a)||(e+=a),e+=this.type(),new i(e)}parent(){const e=this.list();return e.length===1?new i(a):new i(e.slice(0,-1).join(a))}child(e){return this.toString()===a?e:e.toString()===a?this:new i(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return p.withNamespaces([...this.namespaces(),...$(e.map(t=>t.namespaces()))])}}function W(e){const t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function L(e){const t=e.split(":");return t[t.length-1]}function $(e){return[].concat(...e)}const i=y(p,{className:"Key",symbolName:"@ipfs/interface-datastore/key"});var F=i;export{y as c,u as g,F as k,g as u};
