import{isNode as e,EventDispatcher as o,isWebWorker as n}from"../../web_modules/@AssetSync/common.js";import i from"./backend/Assets.js";import r from"./backend/Realms.js";import a from"./backend/Profiles.js";export default async function(s){new c(s)}class c extends o{constructor({assetSync:s,worldSync:t}){super();this.assetSync=s,this.worldSync=t,this.start()}async start(){this.assets=new i(this.assetSync),this.realms=new r(this.assetSync),await this.realms.initialise(),this.profiles=new a(this.assetSync),e||(n&&(worldSync.addFunction("requestPointerLock"),worldSync.addFunction("exitPointerLock"),worldSync.addFunction("hasFocus")),this.loadConjure())}async loadConjure(){const{startConjure:s}=await import("./conjure/Conjure.js");s(this)}}
