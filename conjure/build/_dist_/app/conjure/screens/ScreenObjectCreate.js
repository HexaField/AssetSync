import*as r from" https://cdn.skypack.dev/pin/three@v0.123.0-STd7XeVUbImsNuMmqKGL/min/three.js";import a from"./elements/ScreenElementButton.js";import s from"./elements/ScreenElementCycleButton.js";import n from"./ScreenBase.js";import{PHYSICS_TYPES as o,PHYSICS_SHAPES as i}from"../world/realm/ObjectManager.js";import{createGeometry as c}from"../util/wireframe/index.js";import{POSTPROCESSING as h}from"../PostProcessing.js";export default class l extends n{constructor(t,e){super(t,e);this.group.add(this.background),this.objectTypes=new Map([["Group",r.Group],["Mesh",r.Mesh],["Menger","Menger"]]),this.onCreateObject=this.onCreateObject.bind(this),this.createButton=new a(this,this,{x:-this.width/4,width:.3,height:.1,text:"Create"}),this.createButton.setOnClickCallback(this.onCreateObject),this.registerElement(this.createButton),this.objectTypeButton=new s(this,this,{x:this.width/4,width:.3,height:.1}),this.objectTypeButton.setValues(Array.from(this.objectTypes.keys())),this.registerElement(this.objectTypeButton)}async onCreateObject(){let t=this.objectTypeButton.getValue(!0);if(t==="Menger"){let e=new r.Mesh;e.name="Menger",e.geometry=this.screenManager.conjure.assetManager.mengerGeometry.clone(),e.geometry=e.geometry.toNonIndexed(),c(e.geometry,!0),e.material=new r.MeshPhysicalMaterial({color:this.defaultColour3}),e.layers.enable(h.BLOOM_SCENE),await this.world.realm.createObject(e)}else{let e=new(this.objectTypes.get(t));e.name=t+"-"+Math.round(Math.random()*1e4);switch(t){case"Mesh":e.geometry=this.screenManager.conjure.assetManager.defaultGeometry,e.material=this.screenManager.conjure.assetManager.defaultMaterial;break;default:break}e.userData.physics={type:o.NONE,shape:i.AUTO,gravity:1,bounciness:0,mass:1,destructable:!1,deformable:!1},await this.world.realm.createObject(e)}}}
