import{THREE as o,ExtendedMesh as s,ExtendedGroup as l}from"../../../../../web_modules/enable3d.js";import h from"../../screens/text/TextRenderer3D.js";export default class a{constructor(e,i,t={}){this.conjure=e,this.portalWidth=t.portalWidth||1,this.portalHeight=t.portalHeight||1,this.portalLength=t.portalLength||1,this.group=new l,i.add(this.group),this.group.position.set(t.position.x,t.position.y,t.position.z),this.portalMaterial=new o.MeshBasicMaterial({visible:!1}),this.portalEntered=!1,this.portal=new s(new o.BoxBufferGeometry(this.portalWidth,this.portalLength,this.portalHeight),this.portalMaterial),this.group.add(this.portal),this.portal.name="portal-"+t.realmData.id,e.physics.add.existing(this.group,{collisionFlags:6}),this.group.body.on.collision((r,n)=>{if(this.portalEntered)return;this.portalEntered=!0,console.log(t.realmData.id),r===this.conjure.getWorld().user.group&&this.conjure.world.joinRealmByID(t.realmData.id)}),this.nameplate=new h(e,this.group,{text:t.realmData.name,color:t.color,glow:!0}),this.nameplate.group.lookAt(new o.Vector3),this.nameplate.group.position.setY(1),this.nameplate.group.scale.setScalar(4)}destroy(){this.group.body&&this.conjure.physics.destroy(this.group.body),this.group.parent.remove(this.group)}}
