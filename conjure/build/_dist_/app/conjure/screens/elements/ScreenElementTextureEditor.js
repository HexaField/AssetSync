import i from"./ScreenElementBase.js";import n from"./ScreenElementSprite.js";import h from"./ScreenElementButton.js";export default class c extends i{constructor(e,t,s,r={}){super(e,t,r);this.previewScale=s,this.openTextureEditor=this.openTextureEditor.bind(this),this.onTextureEdited=this.onTextureEdited.bind(this),this.preview=new n(this.screen,this,{x:-this.width/2+this.previewScale/2,width:1,height:1}),this.preview.setIconScale(this.previewScale),this.registerElement(this.preview),this.selectorButton=new h(e,this,{x:this.width/2-.1,width:.2,height:this.height}),this.selectorButton.setOnClickCallback(this.openTextureEditor),this.selectorButton.setText("Edit"),this.registerElement(this.selectorButton)}onTextureEdited(e){this.setAsset(e),this.screen.screenManager.hideScreen(this.screen.screenManager.screenAssetSelect),this.onClickCallback&&this.onClickCallback(e)}openTextureEditor(){this.screen.screenManager.showScreen(this.screen.screenManager.screenTextureEditor),this.screen.screenManager.screenTextureEditor.setOnSelectCallback(this.onTextureEdited),this.screen.screenManager.screenTextureEditor.setAsset(this.asset)}onClick(){}getValue(e){return!this.asset||!this.asset.data?void 0:e?this.asset:this.asset.data}setAsset(e){if(!e||!e.type)return;console.log(e),this.asset=e,this.preview.setIconTexture(e.data)}update(e){super.update(e)}}
