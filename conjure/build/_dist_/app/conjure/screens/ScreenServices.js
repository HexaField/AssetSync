import s from"./ScreenBase.js";import i from"./elements/ScreenElementButton.js";import r from"./elements/ScreenElementJSONTree.js";import c from"./elements/ScreenElementScroll.js";export default class n extends s{constructor(e,t){super(e,t);this.serviceManager=this.screenManager.conjure.getProfile().getServiceManager(),this.group.add(this.background),this.selectService=this.selectService.bind(this),this.selectedService=void 0,this.servicesScrollPanel=new c(this,this,{x:-.4,width:.8,height:this.height-.1,scrollSide:"left"}),this.registerElement(this.servicesScrollPanel),this.jsonTree=new r(this,this,{x:.4,width:.8,height:this.height-.1}),this.registerElement(this.jsonTree),this.jsonTree.setHidden(!0)}addServices(){for(let e of Object.values(this.serviceManager.services)){let t=new i(this,this.servicesScrollPanel,{width:this.buttonWidth,height:this.buttonHeight,text:e.name});t.setOnClickCallback(this.selectService,t),this.servicesScrollPanel.registerItem(t)}}selectService(e){e&&(this.selectedService&&this.servicesScrollPanel.unSelectAll(),e.getText()===this.selectedService?this.selectedService=void 0:(this.selectedService=e.getText(),e.setSelected(!0))),this.selectedService?(this.jsonTree.setHidden(!1),this.jsonTree.setSchema(this.screenManager.conjure.getProfile().getServiceManager().getService(this.selectedService).getSchema()),this.jsonTree.updateTree(this.screenManager.conjure.getProfile().getServiceManager().getService(this.selectedService).getData(),this.selectService)):this.jsonTree.setHidden(!0)}showScreen(e){super.showScreen(e),this.servicesScrollPanel.setActive(e)}update(e){super.update(e)}}
