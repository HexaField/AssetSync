import{c as L,a as _}from"./common/_commonjsHelpers-c99fd594.js";import{a as g,l as Y,t as F,f as z,d as V,p as I,e as W,b as X,c as q,g as J}from"./common/index-73d40476.js";var K=L(function(S,f){/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */var m=_&&_.__awaiter||function(s,c,o,e){function n(r){return r instanceof o?r:new o(function(t){t(r)})}return new(o||(o=Promise))(function(r,t){function i(p){try{l(e.next(p))}catch(h){t(h)}}function a(p){try{l(e.throw(p))}catch(h){t(h)}}function l(p){p.done?r(p.value):n(p.value).then(i,a)}l((e=e.apply(s,c||[])).next())})},v=_&&_.__generator||function(s,c){var o={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,n,r,t;return t={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(t[Symbol.iterator]=function(){return this}),t;function i(l){return function(p){return a([l,p])}}function a(l){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=l[0]&2?n.return:l[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,l[1])).done)return r;(n=0,r)&&(l=[l[0]&2,r.value]);switch(l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,r=r.length>0&&r[r.length-1])&&(l[0]===6||l[0]===2)){o=0;continue}if(l[0]===3&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(l[0]===6&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=c.call(s,o)}catch(p){l=[6,p],n=0}finally{e=r=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(f,"__esModule",{value:!0});var u=function(){function s(c,o){this.cache=c,this.textureAnisotropy=o}return Object.defineProperty(s.prototype,"fileLoader",{get:function(){return this._fileLoader||(this._fileLoader=new g.FileLoader),this._fileLoader},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"imageLoader",{get:function(){return this._imgLoader||(this._imgLoader=new g.ImageLoader),this._imgLoader},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"svgLoader",{get:function(){return this._svgLoader||(this._svgLoader=new g.SVGLoader),this._svgLoader},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"textureLoader",{get:function(){return this._textureLoader||(this._textureLoader=new g.TextureLoader),this._textureLoader},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"gltfLoader",{get:function(){return this._gltfLoader||(this._gltfLoader=new g.GLTFLoader),this._gltfLoader},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fbxLoader",{get:function(){return this._fbxLoader||(this._fbxLoader=new g.FBXLoader),this._fbxLoader},enumerable:!0,configurable:!0}),s.prototype.preload=function(c,o){return m(this,void 0,void 0,function(){var e=this;return v(this,function(n){return this.cache.add(c,o),[2,new Promise(function(r){var t=/\.fbx$|\.glb$|\.gltf$/.test(o),i=/\.jpe?g$|\.png$/.test(o);i?e.textureLoader.load(o,function(a){return r(a)}):(t&&e.fileLoader.setResponseType("arraybuffer"),e.fileLoader.load(o,function(a){return r(a)}))})]})})},s.prototype.file=function(c){var o=this,e=this.cache.get(c);return c=e||c,new Promise(function(n){o.fileLoader.load(c,function(r){return n(r)})})},s.prototype.svg=function(c){var o=this,e=this.cache.get(c);return c=e||c,new Promise(function(n){o.svgLoader.load(c,function(r){return n(r)})})},s.prototype.texture=function(c){var o=this,e=this.cache.get(c);return c=e||c,new Promise(function(n){o.textureLoader.load(c,function(r){r.anisotropy=o.textureAnisotropy,r.format=g.RGBAFormat,r.needsUpdate=!0,r.anisotropy=o.textureAnisotropy,n(r)})})},s.prototype.gltf=function(c){var o=this,e=this.cache.get(c);return c=e||c,new Promise(function(n){o.gltfLoader.load(c,function(r){n(r)})})},s.prototype.fbx=function(c){var o=this,e=this.cache.get(c);return c=e||c,new Promise(function(n){o.fbxLoader.load(c,function(r){n(r)})})},s}();f.default=u}),Q=L(function(S,f){/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */var m=_&&_.__extends||function(){var o=function(e,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i])},o(e,n)};return function(e,n){o(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(f,"__esModule",{value:!0});var v=g,u=g,s=function(o){m(e,o);function e(n,r,t,i){var a=o.call(this)||this;return a.scene=n,a.light=r,a.size=t,a.color=i,a.geo=new g.SphereBufferGeometry(t||.2,16,8),a.mat=new g.MeshBasicMaterial({color:i||r.color}),a.mesh=new g.Mesh(a.geo,a.mat),a.add(a.mesh),r.add(a),a}return e.prototype.dispose=function(){this.mesh.geometry.dispose(),Array.isArray(this.mesh.material)?this.mesh.material.forEach(function(n){return n.dispose()}):this.mesh.material.dispose(),this.remove(this.mesh)},e.prototype.update=function(){},e}(g.Object3D),c=function(){function o(e){this.scene=e}return Object.defineProperty(o.prototype,"helper",{get:function(){var e=this;return{directionalLightHelper:function(n,r,t){var i=new u.DirectionalLightHelper(n,r,t);return e.scene.add(i),i},spotLightHelper:function(n,r){var t=new u.SpotLightHelper(n,r);return e.scene.add(t),t},pointLightHelper:function(n,r,t){return new s(e.scene,n,r,t)}}},enumerable:!0,configurable:!0}),o.prototype.directionalLight=function(e){e===void 0&&(e={});var n=e.color,r=n===void 0?16777215:n,t=e.intensity,i=t===void 0?1:t,a=new v.DirectionalLight(r,i);return a.castShadow=!0,this.scene.add(a),a},o.prototype.hemisphereLight=function(e){e===void 0&&(e={});var n=e.skyColor,r=n===void 0?16777215:n,t=e.groundColor,i=t===void 0?16777215:t,a=e.intensity,l=a===void 0?1:a,p=new v.HemisphereLight(r,i,l);return this.scene.add(p),p},o.prototype.ambientLight=function(e){e===void 0&&(e={});var n=e.color,r=n===void 0?16777215:n,t=e.intensity,i=t===void 0?1:t,a=new v.AmbientLight(r,i);return this.scene.add(a),a},o.prototype.pointLight=function(e){e===void 0&&(e={});var n=e.color,r=n===void 0?16777215:n,t=e.intensity,i=t===void 0?1:t,a=e.distance,l=a===void 0?0:a,p=e.decay,h=p===void 0?1:p,d=new v.PointLight(r,i,l,h);return d.castShadow=!0,this.scene.add(d),d},o.prototype.spotLight=function(e){e===void 0&&(e={});var n=e.color,r=n===void 0?16777215:n,t=e.intensity,i=t===void 0?1:t,a=e.distance,l=a===void 0?0:a,p=e.angle,h=p===void 0?Math.PI/8:p,d=e.penumbra,y=d===void 0?0:d,b=e.decay,w=b===void 0?1:b,P=new v.SpotLight(r,i,l,h,y,w);return P.castShadow=!0,this.scene.add(P),P},o.prototype.rectAreaLight=function(e){e===void 0&&(e={});var n=e.color,r=n===void 0?16777215:n,t=e.intensity,i=t===void 0?1:t,a=e.width,l=a===void 0?10:a,p=e.height,h=p===void 0?10:p,d=new v.RectAreaLight(r,i,l,h);return this.scene.add(d),d},o}();f.default=c}),$=L(function(S,f){/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */var m=_&&_.__extends||function(){var r=function(t,i){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var p in l)l.hasOwnProperty(p)&&(a[p]=l[p])},r(t,i)};return function(t,i){r(t,i);function a(){this.constructor=t}t.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}();Object.defineProperty(f,"__esModule",{value:!0});var v=function(){function r(t,i){this.scene=t,this.transform=i}return r.prototype.toGeometry=function(t,i){t.geometry=this.transform.bufferGeometryToGeometry(t.geometry),i.geometry=this.transform.bufferGeometryToGeometry(i.geometry)},r.prototype.toBufferGeometry=function(t){t.geometry=this.transform.geometryToBufferGeometry(t.geometry)},r.prototype.union=function(t,i){this.toGeometry(t,i);var a=this.doCSG(t,i,"union");return this.toBufferGeometry(a),this.scene.add(a),a},r.prototype.subtract=function(t,i){this.toGeometry(t,i);var a=this.doCSG(t,i,"subtract");return this.toBufferGeometry(a),this.scene.add(a),a},r.prototype.intersect=function(t,i){this.toGeometry(t,i);var a=this.doCSG(t,i,"intersect");return this.toBufferGeometry(a),this.scene.add(a),a},r.prototype.doCSG=function(t,i,a){t.updateMatrix(),i.updateMatrix();var l=u.fromMesh(t),p=u.fromMesh(i),h=l[a](p),d=u.toMesh(h,t.matrix);return d},r}();f.default=v;var u=function(){function r(){this.polygons=[]}return r.fromPolygons=function(t){var i=new r;return i.polygons=t,i},r.fromGeometry=function(t){t.isBufferGeometry&&(t=new g.Geometry().fromBufferGeometry(t));for(var i=t.faces,a=t.vertices,l=[],p=["a","b","c"],h=0;h<i.length;h++){for(var d=i[h],y=[],b=0;b<3;b++){var w=t.faceVertexUvs[0][h]!==void 0&&t.faceVertexUvs[0][h][b]!==void 0?t.faceVertexUvs[0][h][b]:void 0;y.push(new c(a[d[p[b]]],d.vertexNormals[b],w))}l.push(new e(y))}return r.fromPolygons(l)},r.fromMesh=function(t){var i=r.fromGeometry(t.geometry);r._tmpm3.getNormalMatrix(t.matrix);for(var a=0,l=i.polygons;a<l.length;a++)for(var p=l[a],h=0,d=p.vertices;h<d.length;h++){var y=d[h];y.pos.applyMatrix4(t.matrix),y.normal.applyMatrix3(r._tmpm3)}return i},r.toMesh=function(t,i){for(var a=new g.Geometry,l=t.polygons,p=a.vertices,h=a.faceVertexUvs[0],d=0,y=l;d<y.length;d++){for(var b=y[d],w=b.vertices,P=p.length,x=w.length,M=0,E=w;M<E.length;M++){var A=E[M];p.push(new g.Vector3().copy(A.pos))}for(var k=3;k<=x;k++){var O=new g.Face3(P,P+k-2,P+k-1),T=[];h.push(T);var G=O.vertexNormals;G.push(new g.Vector3().copy(w[0].normal)),G.push(new g.Vector3().copy(w[k-2].normal)),G.push(new g.Vector3().copy(w[k-1].normal)),w[0].uv&&w[k-2].uv&&w[k-1].uv&&(T.push(new g.Vector3().copy(w[0].uv)),T.push(new g.Vector3().copy(w[k-2].uv)),T.push(new g.Vector3().copy(w[k-1].uv))),O.normal=new g.Vector3().copy(b.plane.normal),a.faces.push(O)}}var j=new g.Matrix4().getInverse(i);a.applyMatrix4(j),a.verticesNeedUpdate=a.elementsNeedUpdate=a.normalsNeedUpdate=!0,a.computeBoundingSphere(),a.computeBoundingBox();var C=new g.Mesh(a);return C.matrix.copy(i),C.matrix.decompose(C.position,C.rotation,C.scale),C.updateMatrixWorld(),C},r.iEval=function(t,i){var a;if(typeof t=="string")r.currentOp=t;else if(t instanceof Array)for(var l=0,p=t;l<p.length;l++){var h=p[l];r.iEval(h,0)}else if(typeof t=="object"){var d=r.currentOp;t.updateMatrix(),t.updateMatrixWorld(),r.sourceMesh?(r.nextPrim=r.fromMesh(t),r.currentPrim=r.currentPrim[d](r.nextPrim)):r.currentPrim=r.fromMesh(r.sourceMesh=t),r.doRemove&&((a=t==null?void 0:t.parent)===null||a===void 0||a.remove(t))}},r.eval=function(t,i){delete r.currentOp,delete r.sourceMesh,r.doRemove=i,r.iEval(t);var a=r.toMesh(r.currentPrim,r.sourceMesh.matrix);return a.material=r.sourceMesh.material,a.castShadow=a.receiveShadow=!0,a},r.prototype.clone=function(){var t=new r;return t.polygons=this.polygons.map(function(i){return i.clone()}),t},r.prototype.toPolygons=function(){return this.polygons},r.prototype.union=function(t){var i=new n(this.clone().polygons),a=new n(t.clone().polygons);return i.clipTo(a),a.clipTo(i),a.invert(),a.clipTo(i),a.invert(),i.build(a.allPolygons()),r.fromPolygons(i.allPolygons())},r.prototype.subtract=function(t){var i=new n(this.clone().polygons),a=new n(t.clone().polygons);return i.invert(),i.clipTo(a),a.clipTo(i),a.invert(),a.clipTo(i),a.invert(),i.build(a.allPolygons()),i.invert(),r.fromPolygons(i.allPolygons())},r.prototype.intersect=function(t){var i=new n(this.clone().polygons),a=new n(t.clone().polygons);return i.invert(),a.clipTo(i),a.invert(),i.clipTo(a),a.clipTo(i),i.build(a.allPolygons()),i.invert(),r.fromPolygons(i.allPolygons())},r.prototype.inverse=function(){var t=this.clone();return t.polygons.map(function(i){i.flip()}),t},r._tmpm3=new g.Matrix3,r}(),s=function(r){m(t,r);function t(i,a,l){var p=this;if(arguments.length===3)p=r.call(this,i,a,l)||this;else if(Array.isArray(i))p=r.call(this,i[0],i[1],i[2])||this;else if(typeof i=="object")p.copy(i);else throw new Error("Invalid constructor to vector");return p}return t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.prototype.negated=function(){return this.clone().multiplyScalar(-1)},t.prototype.plus=function(i){return this.clone().add(i)},t.prototype.minus=function(i){return this.clone().sub(i)},t.prototype.times=function(i){return this.clone().multiplyScalar(i)},t.prototype.dividedBy=function(i){return this.clone().divideScalar(i)},t.prototype.lerp=function(i,a){return this.plus(i.minus(this).times(a))},t.prototype.unit=function(){return this.dividedBy(this.length())},t.prototype.cross=function(i,a){return g.Vector3.prototype.cross.call(this.clone(),i)},t}(g.Vector3),c=function(){function r(t,i,a){this.pos=new s(t.x,t.y,t.z),this.normal=new s(i.x,i.y,i.z),a&&(this.uv=new s(a.x,a.y,a.z))}return r.prototype.clone=function(){return new r(this.pos.clone(),this.normal.clone(),this.uv?this.uv.clone():void 0)},r.prototype.flip=function(){this.normal=this.normal.negated()},r.prototype.interpolate=function(t,i){return new r(this.pos.lerp(t.pos,i),this.normal.lerp(t.normal,i),this.uv?this.uv.lerp(t.uv,i):void 0)},r}(),o=function(){function r(t,i){this.normal=t,this.w=i}return r.fromPoints=function(t,i,a){var l=i.minus(t).cross(a.minus(t)).unit();return new r(l,l.dot(t))},r.prototype.clone=function(){return new r(this.normal.clone(),this.w)},r.prototype.flip=function(){this.normal=this.normal.negated(),this.w=-this.w},r.prototype.splitPolygon=function(t,i,a,l,p){for(var h=0,d=1,y=2,b=3,w=0,P=[],x=0,M=t.vertices;x<M.length;x++){var E=M[x],A=this.normal.dot(E.pos)-this.w,k=A<-r.EPSILON?y:A>r.EPSILON?d:h;w|=k,P.push(k)}switch(w){case h:(this.normal.dot(t.plane.normal)>0?i:a).push(t);break;case d:l.push(t);break;case y:p.push(t);break;case b:for(var O=[],T=[],G=0;G<t.vertices.length;G++){var j=(G+1)%t.vertices.length,C=P[G],R=P[j],D=t.vertices[G],N=t.vertices[j];if(C!==y&&O.push(D),C!==d&&T.push(C!==y?D.clone():D),(C|R)===b){var A=(this.w-this.normal.dot(D.pos))/this.normal.dot(N.pos.minus(D.pos)),U=D.interpolate(N,A);O.push(U),T.push(U.clone())}}O.length>=3&&l.push(new e(O,t.shared)),T.length>=3&&p.push(new e(T,t.shared));break}},r.EPSILON=1e-5,r}(),e=function(){function r(t,i){i===void 0&&(i=null),this.vertices=t,this.shared=i,this.plane=o.fromPoints(t[0].pos,t[1].pos,t[2].pos)}return r.prototype.clone=function(){var t=this.vertices.map(function(i){return i.clone()});return new r(t,this.shared)},r.prototype.flip=function(){this.vertices.reverse().map(function(t){t.flip()}),this.plane.flip()},r}(),n=function(){function r(t){delete this.plane,delete this.front,delete this.back,this.polygons=[],t&&this.build(t)}return r.prototype.clone=function(){var t=new r;return t.plane=this.plane&&this.plane.clone(),t.front=this.front&&this.front.clone(),t.back=this.back&&this.back.clone(),t.polygons=this.polygons.map(function(i){return i.clone()}),t},r.prototype.invert=function(){for(var t=0,i=this.polygons;t<i.length;t++){var a=i[t];a.flip()}this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();var l=this.front;this.front=this.back,this.back=l},r.prototype.clipPolygons=function(t){if(!this.plane)return t.slice();for(var i=[],a=[],l=0,p=t;l<p.length;l++){var h=p[l];this.plane.splitPolygon(h,i,a,i,a)}return this.front&&(i=this.front.clipPolygons(i)),a=this.back?this.back.clipPolygons(a):[],i.concat(a)},r.prototype.clipTo=function(t){this.polygons=t.clipPolygons(this.polygons),this.front&&this.front.clipTo(t),this.back&&this.back.clipTo(t)},r.prototype.allPolygons=function(){var t=this.polygons.slice();return this.front&&(t=t.concat(this.front.allPolygons())),this.back&&(t=t.concat(this.back.allPolygons())),t},r.prototype.build=function(t){if(!t.length)return;this.plane||(this.plane=t[0].plane.clone());for(var i=[],a=[],l=0,p=t;l<p.length;l++){var h=p[l];this.plane.splitPolygon(h,this.polygons,this.polygons,i,a)}i.length&&(this.front||(this.front=new r),this.front.build(i)),a.length&&(this.back||(this.back=new r),this.back.build(a))},r}()}),Z=L(function(S,f){/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */var m=_&&_.__assign||function(){return m=Object.assign||function(c){for(var o,e=1,n=arguments.length;e<n;e++){o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(c[r]=o[r])}return c},m.apply(this,arguments)},v=_&&_.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(f,"__esModule",{value:!0});var u=v(Y),s=function(){function c(o){this.scene=o}return c.prototype.add=function(o,e){e===void 0&&(e={});var n=this.make(o,e);return n?this.scene.add(n):u.default("Could not make heightmap"),n},c.prototype.make=function(o,e){e===void 0&&(e={});var n=o.image,r=n.width,t=n.height,i=e.colorScale,a=document.createElement("canvas");a.width=r,a.height=t;var l=a.getContext("2d");if(!l)return;l.drawImage(o.image,0,0);var p=l.getImageData(0,0,r,t),h=new g.PlaneGeometry(10,10,r-1,t-1),d={color:13421772,side:g.DoubleSide};i&&(d=m(m({},d),{vertexColors:g.FaceColors}));var y=new g.MeshPhongMaterial(d),b=new F.ExtendedMesh(h,y);b.receiveShadow=b.castShadow=!0,b.shape="concave";for(var w=b.geometry,P=0;P<w.vertices.length;P++)w.vertices[P].z=p.data[P*4]/120;var x=function(M,E){var A=M.vertices[E.a].z,k=M.vertices[E.b].z,O=M.vertices[E.c].z;return Math.max(A,k,O)};return i&&w.faces.forEach(function(M){return M.color=new g.Color(i(x(w,M)).hex())}),b.rotateX(-Math.PI/2),b.updateMatrix(),h.computeFaceNormals(),h.computeVertexNormals(),b.name="heightmap",b},c}();f.default=s}),ee=L(function(S,f){var m=_&&_.__assign||function(){return m=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m.apply(this,arguments)},v=_&&_.__awaiter||function(e,n,r,t){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function p(y){try{d(t.next(y))}catch(b){l(b)}}function h(y){try{d(t.throw(y))}catch(b){l(b)}}function d(y){y.done?a(y.value):i(y.value).then(p,h)}d((t=t.apply(e,n||[])).next())})},u=_&&_.__generator||function(e,n){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},t,i,a,l;return l={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function p(d){return function(y){return h([d,y])}}function h(d){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;(i=0,a)&&(d=[d[0]&2,a.value]);switch(d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=n.call(e,r)}catch(y){d=[6,y],i=0}finally{t=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},s=_&&_.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n.default=e,n};Object.defineProperty(f,"__esModule",{value:!0});var c=s(g),o=function(){function e(n,r,t,i,a,l,p){this.scene=n,this.renderer=r,this.camera=t,this.lights=i,this.physics=a,this.load=l,this.factories=p}return e.prototype.warpSpeed=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return v(this,void 0,void 0,function(){var t,i,a,l,p,h,d,y,b,w,P,x,M,E,A,k,O,T,G,j,C,R;return u(this,function(D){switch(D.label){case 0:return t={},i=n.filter(function(N){return/^-\w+/.test(N)}),a=i.length>0,(n.length===0||a)&&(n=["light","camera","lookAtCenter","ground","grid","orbitControls","fog","sky"]),a&&(l=i.map(function(N){return N.substr(1)}),l.forEach(function(N){var U=n.indexOf(N);n.splice(U,1)})),n.includes("fog"),n.includes("sky")&&(p=new g.Sky,p.scale.setScalar(45e4),this.scene.add(p),h=new c.Mesh(new c.SphereBufferGeometry(2e4,16,8),new c.MeshBasicMaterial({color:16777215})),h.position.y=-7e5,h.visible=!1,this.scene.add(h),d={turbidity:10,rayleigh:2,mieCoefficient:.005,mieDirectionalG:.8,luminance:1,inclination:.25,azimuth:.25,sun:!1},y=4e5,b=p.material.uniforms,b.turbidity.value=d.turbidity,b.rayleigh.value=d.rayleigh,b.mieCoefficient.value=d.mieCoefficient,b.mieDirectionalG.value=d.mieDirectionalG,b.luminance.value=d.luminance,w=Math.PI*(d.inclination-.5),P=2*Math.PI*(d.azimuth-.5),h.position.x=y*Math.cos(P),h.position.y=y*Math.sin(P)*Math.sin(w),h.position.z=y*Math.sin(P)*Math.cos(w),h.visible=d.sun,b.sunPosition.value.copy(h.position)),n.includes("camera")&&(this.camera.position.set(5,5,10),t=m({camera:this.camera},t)),n.includes("light")&&(x=this.lights.ambientLight({color:13421772}),M=this.lights.directionalLight({color:16777215,intensity:.5}),M.position.set(-10,18,5),E=20,M.shadow.camera.top=E,M.shadow.camera.bottom=-E,M.shadow.camera.left=-E,M.shadow.camera.right=E,M.shadow.mapSize.set(1024,1024),A={ambientLight:x,directionalLight:M},t=m({lights:A},t)),n.includes("lookAtCenter")&&this.camera.lookAt(this.scene.position),n.includes("ground")?(k=n.includes("grid"),O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOnAAADusBZ+q87AAAAJtJREFUeJzt0EENwDAAxLDbNP6UOxh+NEYQ5dl2drFv286598GrA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAu37AD8eaBH5JQdVbAAAAAElFTkSuQmCC",[4,this.load.texture(O)]):[3,2];case 1:T=D.sent(),T.wrapS=T.wrapT=c.RepeatWrapping,T.repeat.set(21,21),G={name:"ground",width:21,height:21,depth:1,y:-.5},j={phong:{map:k?T:null,transparent:!0,opacity:.8,color:16777215}},C=void 0,window.__loadPhysics?(C=this.physics.add.ground(G,j),C.body.setRestitution(1)):C=this.factories.add.ground(G,j),C.receiveShadow=!0,t=m({ground:C},t),D.label=2;case 2:return n.includes("orbitControls")&&(R=new g.OrbitControls(this.camera,this.renderer.domElement),t=m({orbitControls:R},t)),[2,t]}})})},e}();f.default=o}),te=L(function(S,f){Object.defineProperty(f,"__esModule",{value:!0});var m=function(){function v(){this._mixers=[]}return v.prototype.animationMixer=function(u){var s=new F.AnimationMixer(u);return this.mixers.add(s),s},Object.defineProperty(v.prototype,"mixers",{get:function(){var u=this;return{create:function(s){return u.animationMixer(s)},add:function(s){return u._mixers.push(s)},get:function(){return u._mixers},update:function(s){var c;return(c=u._mixers)===null||c===void 0?void 0:c.forEach(function(o){return o.update(s/1e3)})}}},enumerable:!0,configurable:!0}),v}();f.default=m}),re=L(function(S,f){Object.defineProperty(f,"__esModule",{value:!0});var m=function(v,u,s){s===void 0&&(s={});var c=s.width,o=c===void 0?20:c,e=s.height,n=e===void 0?20:e,r=s.x,t=r===void 0?0:r,i=s.y,a=i===void 0?0:i,l=s.z,p=l===void 0?0:l,h=s.color,d=h===void 0?"#ffffff":h,y=s.scale,b=y===void 0?4:y,w=s.flowX,P=w===void 0?1:w,x=s.flowY,M=x===void 0?1:x,E=s.normalMap0,A=E===void 0?void 0:E,k=s.normalMap1,O=k===void 0?void 0:k,T=new g.PlaneBufferGeometry(o,n),G=new g.MeshStandardMaterial({color:30654,transparent:!0,opacity:.8}),j=new g.Mesh(T,G);j.position.set(t,a,p),j.rotation.x=Math.PI*-.5,v.add(j);var C=new g.PlaneBufferGeometry(o,n),R=new g.Water(C,{color:d,scale:b,flowDirection:new g.Vector2(P,M),textureWidth:1024,textureHeight:1024,normalMap0:A,normalMap1:O,encoding:u.outputEncoding});return R.position.set(t,a+.1,p),R.rotation.x=Math.PI*-.5,v.add(R),{ground:j,water:R}};f.addWater=m}),ne=L(function(S,f){Object.defineProperty(f,"__esModule",{value:!0});var m=function(){function u(s,c,o){this.scene=s,this.renderer=c,this.factories=o}return u.prototype.water=function(s){s===void 0&&(s={}),re.addWater(this.scene,this.renderer,s)},u.prototype.textureCube=function(s){var c=this;s.length!==6&&console.log("[enable3d] You need to pass 6 urls to textureCube()");var o=new v;return s.forEach(function(e,n){e.wrapS=e.wrapT=g.RepeatWrapping;var r=c.factories.add.material({phong:{map:e}});o.materials[n]=r}),o},u}();f.default=m;var v=function(){function u(){this.materials=new Array(6)}return Object.defineProperty(u.prototype,"texture",{get:function(){return{left:this.getTexture(0),right:this.getTexture(1),up:this.getTexture(2),down:this.getTexture(3),front:this.getTexture(4),back:this.getTexture(5)}},enumerable:!0,configurable:!0}),u.prototype.getTexture=function(s){return this.materials[s].map},u}();f.TextureCube=v}),ie=L(function(S,f){Object.defineProperty(f,"__esModule",{value:!0});var m=g;/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */var v=function(){function u(s,c){this.camera=s,this.renderer=c}return u.prototype.geometryToBufferGeometry=function(s){return s.isGeometry?new g.BufferGeometry().fromGeometry(s):s},u.prototype.bufferGeometryToGeometry=function(s){return s.isBufferGeometry?new g.Geometry().fromBufferGeometry(s):s},u.prototype.fromSVGtoShape=function(s,c,o){if(c===void 0&&(c=!1),s){var e=new m.SVGLoader,n=[];return e.parse(s).paths.forEach(function(r){r.toShapes(c,o).forEach(function(t){n.push(t)})}),n}return[]},u.prototype.from3dto2d=function(s){var c=new g.Vector3(s.x,s.y,s.z),o=this.renderer.domElement;this.camera.updateMatrixWorld(),c.project(this.camera);var e=Math.round((c.x+1)*(o.width/2)),n=Math.round((-c.y+1)*(o.height/2));return new g.Vector2(e,n)},u.prototype.from2dto3d=function(s,c,o){o===void 0&&(o=0);var e=this.getPixelsPerSquare(o),n=this.renderer.domElement,r=n.width/2/e,t=n.height/2/e;return new g.Vector3(-(r-s/e),t-c/e,o)},u.prototype.getPixelsPerSquare=function(s){s===void 0&&(s=0);var c=this.from3dto2d(new g.Vector3(0,0,s)),o=this.from3dto2d(new g.Vector3(1,0,s));return Math.abs(c.x-o.x)},u}();f.default=v}),oe=L(function(S,f){/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */var m=_&&_.__importStar||function(s){if(s&&s.__esModule)return s;var c={};if(s!=null)for(var o in s)Object.hasOwnProperty.call(s,o)&&(c[o]=s[o]);return c.default=s,c};Object.defineProperty(f,"__esModule",{value:!0});var v=m(g),u=function(){function s(c,o,e){this._renderer=c,this._camera=o,this.cameraObject=e}return s.Enable=function(c,o){var e=new v.SphereGeometry(.1),n=new v.MeshLambertMaterial({transparent:!0,opacity:.5,color:16711680}),r=new v.Mesh(e,n);r.position.set(0,5,2),c.xr.enabled=!0;var t=new s(c,o,r);t.addCamera();var i=v.VRButton.createButton(c);return i.style.cssText+="background: rgba(0, 0, 0, 0.8); ",document.body.appendChild(i),t},s.prototype.addCamera=function(){this.cameraObject.add(this._camera)},Object.defineProperty(s.prototype,"isPresenting",{get:function(){var c,o;return!!((o=(c=this._renderer)===null||c===void 0?void 0:c.xr)===null||o===void 0?void 0:o.isPresenting)},enumerable:!0,configurable:!0}),s.prototype.getController=function(c){return this._renderer.xr.getController(c)},Object.defineProperty(s.prototype,"camera",{get:function(){return this.WebXRCamera},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"WebXRCamera",{get:function(){var c=this,o;return{object3D:this.cameraObject,position:(o=this.cameraObject)===null||o===void 0?void 0:o.position,rotation:this.isPresenting?this._renderer.xr.getCamera(this._camera).rotation:void 0,getWorldDirection:function(e){return c.isPresenting?c._renderer.xr.getCamera(c._camera).getWorldDirection(e):void 0}}},enumerable:!0,configurable:!0}),s}();f.default=u}),ae=L(function(S,f){Object.defineProperty(f,"__esModule",{value:!0});var m=function(v,u){var s,c;if(v===void 0&&(v=20),!window.__loadPhysics){console.log("There is not much fun without physics enabled!");return}for(var o=0;o<v;o++){var e=["standard","basic","normal","phong","line","points"],n=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},r=function(t){return t[Math.floor(Math.random()*t.length)]};Math.random()>.5?u.add.box({x:n(-10,10),y:n(10,20),z:n(-10,10),width:n(1,2)/10,height:n(1,2)/10,depth:n(1,2)/10,mass:1},(s={},s[r(e)]={color:Math.floor(Math.random()*16777215)},s)).body.setRestitution(Math.floor(Math.random()*10)/20):u.add.sphere({x:n(-10,10),y:n(10,20),z:n(-10,10),radius:n(1,2)/10,mass:1},(c={},c[r(e)]={color:Math.floor(Math.random()*16777215)},c)).body.setRestitution(Math.floor(Math.random()*10)/20)}};f.default=m}),H=L(function(S,f){/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */Object.defineProperty(f,"__esModule",{value:!0});var m=function(){function v(){}return v.prototype.perspectiveCamera=function(u){return u===void 0&&(u={}),v.Perspective(u)},v.prototype.orthographicCamera=function(u){return u===void 0&&(u={}),v.Orthographic(u)},v.Perspective=function(u){u===void 0&&(u={});var s=u.fov,c=s===void 0?50:s,o=u.aspect,e=o===void 0?window.innerWidth/window.innerHeight:o,n=u.near,r=n===void 0?.1:n,t=u.far,i=t===void 0?2e3:t,a=u.x,l=a===void 0?0:a,p=u.y,h=p===void 0?0:p,d=u.z,y=d===void 0?0:d,b=new g.PerspectiveCamera(c,e,r,i);return b.position.set(l,h,y),b},v.Orthographic=function(u){u===void 0&&(u={});var s=window.innerWidth,c=window.innerHeight,o=u.left,e=o===void 0?s/-100:o,n=u.right,r=n===void 0?s/100:n,t=u.top,i=t===void 0?c/100:t,a=u.bottom,l=a===void 0?c/-100:a,p=u.near,h=p===void 0?1:p,d=u.far,y=d===void 0?1e3:d,b=u.x,w=b===void 0?0:b,P=u.y,x=P===void 0?0:P,M=u.z,E=M===void 0?0:M,A=new g.OrthographicCamera(e,r,i,l,h,y);return A.position.set(w,x,E),A},v}();f.default=m}),se=L(function(S,f){var m=_&&_.__importDefault||function(h){return h&&h.__esModule?h:{default:h}},v=_&&_.__importStar||function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var y in h)Object.hasOwnProperty.call(h,y)&&(d[y]=h[y]);return d.default=h,d};Object.defineProperty(f,"__esModule",{value:!0});var u=m(K);f.Loaders=u.default;var s=m(Q);f.Lights=s.default;var c=m(z);f.Factories=c.default;var o=m($);f.CSG=o.default;var e=m(Z);f.HeightMap=e.default;var n=m(ee);f.WarpSpeed=n.default;var r=m(te);f.Mixers=r.default;var t=v(ne);f.Misc=t.default,f.TextureCube=t.TextureCube;var i=m(ie);f.Transform=i.default;var a=m(oe);f.WebXR=a.default;var l=m(ae);f.HaveSomeFun=l.default;var p=m(H);f.Cameras=p.default}),ce=L(function(S,f){/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */var m=_&&_.__awaiter||function(o,e,n,r){function t(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{h(r.next(d))}catch(y){a(y)}}function p(d){try{h(r.throw(d))}catch(y){a(y)}}function h(d){d.done?i(d.value):t(d.value).then(l,p)}h((r=r.apply(o,e||[])).next())})},v=_&&_.__generator||function(o,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,t,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(h){return function(d){return p([h,d])}}function p(h){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,t&&(i=h[0]&2?t.return:h[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,h[1])).done)return i;(t=0,i)&&(h=[h[0]&2,i.value]);switch(h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,t=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(o,n)}catch(d){h=[6,d],t=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},u=_&&_.__importStar||function(o){if(o&&o.__esModule)return o;var e={};if(o!=null)for(var n in o)Object.hasOwnProperty.call(o,n)&&(e[n]=o[n]);return e.default=o,e};Object.defineProperty(f,"__esModule",{value:!0});var s=u(se),c=function(){function o(e){e===void 0&&(e={}),this.sceneConfig=e,this.scenes=new Map,this.__config={},this._isRunning=!1,this._deconstructorFunctions=[];var n=e.key,r=n===void 0?Math.random().toString():n,t=e.enableXR,i=t===void 0?!1:t;this.__config.sceneKey=r,this.__config.enableXR=i}return Object.defineProperty(o.prototype,"deconstructor",{get:function(){var e=this;return{add:function(n){e._deconstructorFunctions.push(n)}}},enumerable:!0,configurable:!0}),o.prototype.initializeScene=function(e){var n=e.renderer,r=e.parent,t=e.canvas,i=e.scene,a=e.scenes,l=e.camera,p=e.cache,h=e.physics,d=e.sceneConfig;this.scene=i,this.scenes=a,this.camera=l,this.cache=p,this.physics=h,this.renderer=n,this.parent=r,this.canvas=t;var y=d.autoStart,b=d.textureAnisotropy;this.load=new s.Loaders(this.cache,b),this.lights=new s.Lights(this.scene),this.transform=new s.Transform(this.camera,this.renderer),this.csg=new s.CSG(this.scene,this.transform),this.heightMap=new s.HeightMap(this.scene),this.factories=new s.Factories(this.scene),this.misc=new s.Misc(this.scene,this.renderer,this.factories),this.ws=new s.WarpSpeed(i,n,l,this.lights,this.physics,this.load,this.factories),this.mixers=new s.Mixers,this.cameras=new s.Cameras,this.clock=new g.Clock,this.__config.enableXR&&(this.webXR=s.WebXR.Enable(this.renderer,this.camera)),y&&this.start(this.__config.sceneKey)},Object.defineProperty(o.prototype,"sceneKey",{get:function(){return this.__config.sceneKey},enumerable:!0,configurable:!0}),o.prototype.destroy=function(e){var n;(n=this.physics)===null||n===void 0||n.destroy(e.body),this.scene.remove(e),e=null},o.prototype.warpSpeed=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return m(this,void 0,void 0,function(){var r;return v(this,function(t){switch(t.label){case 0:return[4,(r=this.ws).warpSpeed.apply(r,e)];case 1:return[2,t.sent()]}})})},Object.defineProperty(o.prototype,"animationMixers",{get:function(){return this.mixers.mixers},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"make",{get:function(){return this.factories.make},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"add",{get:function(){return this.factories.add},enumerable:!0,configurable:!0}),o.prototype.haveSomeFun=function(e){e===void 0&&(e=20),s.HaveSomeFun(e,this.physics)},o.prototype.isRunning=function(){return this._isRunning},o.prototype.start=function(e,n){var r;return m(this,void 0,void 0,function(){return v(this,function(t){return e&&e!==this.__config.sceneKey?(this.stop(),(r=this.scenes.get(e))===null||r===void 0||r._start(n)):this._start(n),[2]})})},o.prototype._start=function(e){var n;return m(this,void 0,void 0,function(){var r=this;return v(this,function(t){switch(t.label){case 0:return[4,(n=this.init)===null||n===void 0?void 0:n.call(this,e)];case 1:return t.sent(),[4,this._preload()];case 2:return t.sent(),[4,this._create()];case 3:return t.sent(),this.renderer.setAnimationLoop(function(){r._update()}),this._isRunning=!0,[2]}})})},o.prototype.restart=function(e){return m(this,void 0,void 0,function(){return v(this,function(n){return this.stop(),this.start(this.__config.sceneKey,e),[2]})})},o.prototype.stop=function(){return m(this,void 0,void 0,function(){var e,e,e;return v(this,function(n){switch(n.label){case 0:this._isRunning=!1,this.renderer.setAnimationLoop(null),this.clock.start(),e=0,n.label=1;case 1:return e<this._deconstructorFunctions.length?[4,this._deconstructorFunctions[e]()]:[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:for(this._deconstructorFunctions=[],e=Object.keys(this.physics.objectsAmmo).length-1;e>=0;e--)this.physics.destroy(Object.values(this.physics.objectsAmmo)[e].body);for(e=this.scene.children.length-1;e>=0;e--)this.scene.remove(this.scene.children[e]);return[2]}})})},o.prototype.setSize=function(e,n){this.renderer.setSize(e,n),typeof this.camera.aspect!="undefined"&&(this.camera.aspect=e/n),this.camera.updateProjectionMatrix()},o.prototype.setPixelRatio=function(e){this.renderer.setPixelRatio(e)},o.prototype.init=function(e){},o.prototype.preload=function(){},o.prototype.create=function(){},o.prototype.update=function(e,n){},o.prototype._preload=function(){var e;return m(this,void 0,void 0,function(){return v(this,function(n){switch(n.label){case 0:return[4,(e=this.preload)===null||e===void 0?void 0:e.call(this)];case 1:return n.sent(),[2]}})})},o.prototype._create=function(){var e;return m(this,void 0,void 0,function(){return v(this,function(n){switch(n.label){case 0:return[4,(e=this.create)===null||e===void 0?void 0:e.call(this)];case 1:return n.sent(),[2]}})})},o.prototype._update=function(){var e,n,r,t=this.clock.getDelta()*1e3,i=this.clock.getElapsedTime();(e=this.update)===null||e===void 0||e.call(this,parseFloat(i.toFixed(3)),parseInt(t.toString())),(n=this.physics)===null||n===void 0||n.update(t),(r=this.physics)===null||r===void 0||r.updateDebugger(),this.animationMixers.update(t),this.renderer.render(this.scene,this.camera)},o}();f.Scene3D=c}),ue=L(function(S,f){/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */var m=_&&_.__importStar||function(o){if(o&&o.__esModule)return o;var e={};if(o!=null)for(var n in o)Object.hasOwnProperty.call(o,n)&&(e[n]=o[n]);return e.default=o,e},v=_&&_.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(f,"__esModule",{value:!0});var u=m(g),s=v(H),c=function(){function o(e){e===void 0&&(e={}),this.threeGraphicsConfig=e;var n=e.anisotropy,r=n===void 0?1:n,t=e.camera,i=t===void 0?s.default.Perspective({z:25,y:5}):t,a=e.antialias,l=a===void 0?!1:a,p=e.usePhysics,h=p===void 0?!0:p,d=e.renderer;this.textureAnisotropy=r,this.camera=i,this.scene=new u.Scene,this.renderer=d||new u.WebGLRenderer({antialias:l}),this.renderer.outputEncoding=u.GammaEncoding,this.renderer.gammaFactor=1,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=u.PCFSoftShadowMap,this.composer=null,this.cache=u.Cache,this.cache.enabled=!0,h&&(typeof Ammo!="undefined"?this.physics=new V.AmmoPhysics(this.scene,e):console.log("[enable3d]: Are you sure you included ammo.js?"))}return o}();f.ThreeGraphics=c}),le=L(function(S,f){var m=_&&_.__importStar||function(c){if(c&&c.__esModule)return c;var o={};if(c!=null)for(var e in c)Object.hasOwnProperty.call(c,e)&&(o[e]=c[e]);return o.default=c,o};Object.defineProperty(f,"__esModule",{value:!0}),f.ThreeGraphics=ue.ThreeGraphics,f.PhysicsLoader=I.PhysicsLoader;var v=m(g);f.THREE=v;var u=m(F);f.Types=u;var s=g;f.WebGLRenderer=s.WebGLRenderer,f.Texture=s.Texture,f.RGBAFormat=s.RGBAFormat,f.GLTFLoader=s.GLTFLoader,f.FBXLoader=s.FBXLoader,f.Object3D=s.Object3D,f.Vector2=s.Vector2,f.Vector3=s.Vector3,f.MathUtils=s.MathUtils}),he=L(function(S,f){/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */var m=_&&_.__extends||function(){var u=function(s,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,e){o.__proto__=e}||function(o,e){for(var n in e)e.hasOwnProperty(n)&&(o[n]=e[n])},u(s,c)};return function(s,c){u(s,c);function o(){this.constructor=s}s.prototype=c===null?Object.create(c):(o.prototype=c.prototype,new o)}}();Object.defineProperty(f,"__esModule",{value:!0});var v=function(u){m(s,u);function s(c){var o,e=u.call(this,c)||this;e.projectConfig=c,e.scenes=new Map,e.renderer.setSize(window.innerWidth,window.innerHeight),e.projectConfig.parent?e.parent=document.getElementById(e.projectConfig.parent):e.parent=document.body,e.parent||(console.warn('[enable3d] parent "'+e.projectConfig.parent+'" not found! Will add it to the body.'),e.parent=document.body),e.parent.appendChild(e.renderer.domElement),e.canvas=e.renderer.domElement;var n="";return e.projectConfig.scenes.forEach(function(r,t){var i=new r;t===0&&(n=i.sceneKey);var a={sceneConfig:{textureAnisotropy:e.textureAnisotropy,autoStart:!1},renderer:e.renderer,parent:e.parent,canvas:e.canvas,scene:e.scene,scenes:e.scenes,camera:e.camera,cache:e.cache,physics:e.physics};i.initializeScene(a),t===0&&(i.setSize(e.parent.clientWidth,e.parent.clientHeight),i.setPixelRatio(Math.max(1,window.devicePixelRatio/2))),e.scenes.set(i.sceneKey,i)}),(o=e.scenes.get(n))===null||o===void 0||o.start(n),e}return s}(le.ThreeGraphics);f.Project=v}),de=L(function(S,f){/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */var m=_&&_.__extends||function(){var c=function(o,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])},c(o,e)};return function(o,e){c(o,e);function n(){this.constructor=o}o.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),v=_&&_.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(f,"__esModule",{value:!0});var u=v(W),s=function(c){m(o,c);function o(){var e=c!==null&&c.apply(this,arguments)||this;return e.id=-1,e}return Object.defineProperty(o.prototype,"add",{get:function(){var e=this;return{axis:function(n){return n===void 0&&(n={}),e.addAxis(n)},button:function(n){return n===void 0&&(n={}),e.addButton(n)}}},enumerable:!0,configurable:!0}),o.prototype.addAxis=function(e){var n=this;e===void 0&&(e={}),this.id++;var r=e.styles,t=r===void 0?{left:35,bottom:35,size:100}:r,i=this.circle({styles:t}),a=this.thumb({styles:t});i.appendChild(a),document.body.appendChild(i);var l=e.maxRadius,p=l===void 0?40:l,h=e.rotationDamping,d=h===void 0?.06:h,y=e.moveDamping,b=y===void 0?.01:y,w={id:this.id,domElement:a,maxRadius:p,maxRadiusSquared:p*p,origin:{left:a.offsetLeft,top:a.offsetTop},offset:{x:0,y:0},rotationDamping:d,moveDamping:b};if(w==null?void 0:w.domElement){var P=w.domElement;"ontouchstart"in window?P.addEventListener("touchstart",function(x){x.preventDefault(),n.tap(x,w),x.stopPropagation()}):P.addEventListener("mousedown",function(x){x.preventDefault(),n.tap(x,w),x.stopPropagation()})}return{onMove:function(x){n.on("axis_onmove_"+w.id,function(M){x(M)})}}},o.prototype.addButton=function(e){var n=this;e===void 0&&(e={}),this.id++;var r=e.styles,t=r===void 0?{right:35,bottom:35,size:80}:r,i=e.letter,a=i===void 0?"A":i,l=this.circle({styles:t}),p=this.letter({letter:a});l.appendChild(p),document.body.appendChild(l);var h={id:this.id,domElement:l,offset:{x:0,y:0}};return(h==null?void 0:h.domElement)&&this.click(h),{onClick:function(d){n.on("button_onclick_"+h.id,function(y){d(y)})},onRelease:function(d){n.on("button_onrelease_"+h.id,function(y){d(y)})}}},o.prototype.circle=function(e){e===void 0&&(e={});var n=e.styles,r=n.top,t=n.right,i=n.bottom,a=n.left,l=n.size,p=document.createElement("div"),h="position:absolute; width:"+l+"px; height:"+l+"px; background:rgba(126, 126, 126, 0.5); border:#444 solid medium; border-radius:50%; cursor: pointer; ";return r&&(h+="top:"+r+"px; "),t&&(h+="right:"+t+"px; "),i&&(h+="bottom:"+i+"px; "),a&&(h+="left:"+a+"px; "),p.style.cssText=h,p},o.prototype.thumb=function(e){e===void 0&&(e={});var n=e.styles,r=n.size,t=document.createElement("div");return t.style.cssText="position: absolute; left: "+r/4+"px; top: "+r/4+"px; width: "+r/2+"px; height: "+r/2+"px; border-radius: 50%; background: #fff; ",t},o.prototype.letter=function(e){e===void 0&&(e={});var n=e.letter,r=document.createElement("span");return r.innerText=n,r.style.cssText="position: absolute; text-align: center; top: 4px; width: 80px; height: 80px; font-size: 64px; color: #fff; ",r},o.prototype.click=function(e){var n=this,r=e.id,t=e.domElement;"ontouchstart"in window?(t.addEventListener("touchstart",function(i){i.preventDefault(),n.emit("button_onclick_"+r)}),t.addEventListener("touchend",function(i){i.preventDefault(),n.emit("button_onrelease_"+r)})):(t.addEventListener("mousedown",function(i){i.preventDefault(),n.emit("button_onclick_"+r),i.stopPropagation()}),t.addEventListener("mouseup",function(i){i.preventDefault(),n.emit("button_onrelease_"+r),i.stopPropagation()}))},o.prototype.tap=function(e,n){var r=this;e=e||window.event,n.offset=this.getMousePosition(e),"ontouchstart"in window?(document.ontouchmove=function(t){t.target===n.domElement&&r.move(t,n)},document.ontouchend=function(t){t.target===n.domElement&&r.up(n)}):(document.onmousemove=function(t){t.target===n.domElement&&r.move(t,n)},document.onmouseup=function(t){r.up(n)})},o.prototype.move=function(e,n){var r=n.domElement,t=n.maxRadius,i=n.maxRadiusSquared,a=n.origin,l=n.offset,p=n.id;e=e||window.event;var h=this.getMousePosition(e),d=h.x-l.x,y=h.y-l.y,b=d*d+y*y;if(b>i){var w=Math.sqrt(b);d/=w,y/=w,d*=t,y*=t}r.style.top=y+r.clientHeight/2+"px",r.style.left=d+r.clientWidth/2+"px";var P=-(y-a.top+r.clientHeight/2)/t,x=(d-a.left+r.clientWidth/2)/t;this.emit("axis_onmove_"+p,{top:P,right:x})},o.prototype.up=function(e){var n=e.domElement,r=e.origin,t=e.id;"ontouchstart"in window?(document.ontouchmove=null,document.touchend=null):(document.onmousemove=null,document.onmouseup=null),n.style.top=r.top+"px",n.style.left=r.left+"px",this.emit("axis_onmove_"+t,{top:0,right:0})},o.prototype.getMousePosition=function(e){var n=e.targetTouches?e.targetTouches[0].pageX:e.clientX,r=e.targetTouches?e.targetTouches[0].pageY:e.clientY;return{x:n,y:r}},o}(u.default);f.JoyStick=s}),fe=L(function(S,f){/**
 * @description  This code has originally been copied from Sketchbook
 *
 * @author       swift502 <blaha.j502@gmail.com> (http://jblaha.art/)
 * @copyright    Copyright (c) 2018 swift502; Project Url: https://github.com/swift502/Sketchbook
 * @license      {@link https://github.com/swift502/Sketchbook/blob/master/LICENSE|GPL-3.0}
 *
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */Object.defineProperty(f,"__esModule",{value:!0});var m=function(){function v(u,s,c){this.camera=u,this.target=s,this.config=c;var o=c.offset,e=o===void 0?new g.Vector3(0,0,0):o,n=c.sensitivity,r=n===void 0?new g.Vector2(1,1):n,t=c.radius,i=t===void 0?8:t,a=c.targetRadius,l=a===void 0?10:a,p=c.interpolationFactor,h=p===void 0?.05:p,d=c.pointerLock,y=c.autoUpdate,b=c.theta,w=b===void 0?0:b,P=c.phi,x=P===void 0?0:P;this.offset=e,this.sensitivity=r,this.radius=i,this.targetRadius=l,this.interpolationFactor=h,this.theta=w,this.phi=x}return v.prototype.update=function(u,s){var c=this.target.position.clone().add(this.offset);this.theta-=u*(this.sensitivity.x/2),this.theta%=360,this.phi+=s*(this.sensitivity.y/2),this.phi=Math.min(85,Math.max(-85,this.phi)),this.radius=g.MathUtils.lerp(this.radius,this.targetRadius,this.interpolationFactor),this.camera.position.x=c.x+this.radius*Math.sin(this.theta*Math.PI/180)*Math.cos(this.phi*Math.PI/180),this.camera.position.y=c.y+this.radius*Math.sin(this.phi*Math.PI/180),this.camera.position.z=c.z+this.radius*Math.cos(this.theta*Math.PI/180)*Math.cos(this.phi*Math.PI/180),this.camera.updateMatrix(),this.camera.lookAt(c)},v}();f.ThirdPersonControls=m}),pe=L(function(S,f){/**
 * @description  This code has originally been copied from Sketchbook
 *
 * @author       swift502 <blaha.j502@gmail.com> (http://jblaha.art/)
 * @copyright    Copyright (c) 2018 swift502; Project Url: https://github.com/swift502/Sketchbook
 * @license      {@link https://github.com/swift502/Sketchbook/blob/master/LICENSE|GPL-3.0}
 *
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */Object.defineProperty(f,"__esModule",{value:!0});var m=function(){function v(u,s,c){this.camera=u,this.target=s,this.config=c;var o=c.offset,e=o===void 0?new g.Vector3(0,0,0):o,n=c.sensitivity,r=n===void 0?new g.Vector2(1,1):n,t=c.radius,i=t===void 0?8:t,a=c.targetRadius,l=a===void 0?10:a,p=c.interpolationFactor,h=p===void 0?.05:p,d=c.pointerLock,y=c.autoUpdate;this.offset=e,this.sensitivity=r,this.radius=i,this.targetRadius=l,this.interpolationFactor=h,this.theta=0,this.phi=0}return v.prototype.update=function(u,s){var c=this.target.position.clone().add(this.offset);this.camera.position.copy(c),this.theta-=u*(this.sensitivity.x/2),this.theta%=360,this.phi+=s*(-this.sensitivity.y/2),this.phi=Math.min(85,Math.max(-85,this.phi));var o=new g.Vector3;o.x=c.x+this.radius*Math.sin(this.theta*Math.PI/180)*Math.cos(this.phi*Math.PI/180),o.y=c.y+this.radius*Math.sin(this.phi*Math.PI/180),o.z=c.z+this.radius*Math.cos(this.theta*Math.PI/180)*Math.cos(this.phi*Math.PI/180),this.camera.updateMatrix(),this.camera.lookAt(o)},v}();f.FirstPersonControls=m}),ve=L(function(S,f){Object.defineProperty(f,"__esModule",{value:!0});var m=function(){function v(u,s){s===void 0&&(s=!0),this._element=u,this._isRunning=!1,s&&this.request()}return v.prototype.isLocked=function(){return!!document.pointerLockElement},v.prototype.exit=function(){this._isRunning=!1,document.exitPointerLock(),this.removeListeners()},v.prototype.removeListeners=function(){var u=this;document.removeEventListener("pointerlockchange",function(){return u.pointerLockChangeHandler()}),this._element.removeEventListener("pointerdown",function(){return u.pointerDownHandlerHandler()})},v.prototype.pointerLockChangeHandler=function(){if(!this._isRunning)return;this._request()},v.prototype.pointerDownHandlerHandler=function(){if(!this._isRunning)return;this._element.requestPointerLock()},v.prototype.request=function(){this._isRunning=!0,this._request()},v.prototype._request=function(){var u=this;if(document.addEventListener("pointerlockchange",function(){return u.pointerLockChangeHandler()},{once:!0}),document.pointerLockElement)return;this._element.addEventListener("pointerdown",function(){return u.pointerDownHandlerHandler()},{once:!0})},v}();f.PointerLock=m}),me=L(function(S,f){Object.defineProperty(f,"__esModule",{value:!0});var m=function(){function v(u,s){s===void 0&&(s=!0),this._element=u,this._isRunning=!1,this._position={x:0,y:0},this._delta={x:0,y:0},this._onMoveCallback=function(){},this._isPointerDown=!1,s&&this.start()}return Object.defineProperty(v.prototype,"isTouchDevice",{get:function(){return"ontouchstart"in window},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"isPointerDown",{get:function(){return this._isPointerDown},enumerable:!0,configurable:!0}),v.prototype.start=function(){var u=this;if(this._isRunning)return;this._isRunning=!0,this.isTouchDevice?(this._element.addEventListener("touchstart",function(s){return u.onTouchStart(s)}),this._element.addEventListener("touchend",function(s){return u.onTouchEnd(s)}),this._element.addEventListener("touchmove",function(s){return u.onTouchMove(s)})):(this._element.addEventListener("pointerdown",function(s){return u.onPointerDown(s)}),this._element.addEventListener("pointerup",function(s){return u.onPointerUp(s)}),this._element.addEventListener("pointerleave",function(s){return u.onPointerLeave(s)}),this._element.addEventListener("pointerover",function(s){return u.onPointerOver(s)}),this._element.addEventListener("pointermove",function(s){return u.onPointerMove(s)}))},v.prototype.stop=function(){var u=this;this.isTouchDevice?(this._element.removeEventListener("touchstart",function(s){return u.onTouchStart(s)}),this._element.removeEventListener("touchend",function(s){return u.onTouchEnd(s)}),this._element.removeEventListener("touchmove",function(s){return u.onTouchMove(s)})):(this._element.removeEventListener("pointerdown",function(s){return u.onPointerDown(s)}),this._element.removeEventListener("pointerleave",function(s){return u.onPointerLeave(s)}),this._element.removeEventListener("pointerup",function(s){return u.onPointerUp(s)}),this._element.removeEventListener("pointerover",function(s){return u.onPointerOver(s)}),this._element.removeEventListener("pointermove",function(s){return u.onPointerMove(s)})),this._isRunning=!1},v.prototype.removeListeners=function(){this.stop()},v.prototype.onMove=function(u){this._onMoveCallback=u},v.prototype.onPointerDown=function(u){this._isPointerDown=!0},v.prototype.onPointerUp=function(u){this._isPointerDown=!1},v.prototype.onPointerLeave=function(u){this._isPointerDown=!1},v.prototype.onPointerMove=function(u){var s=u.movementX,c=u.movementY;this._delta={x:s,y:c},this._onMoveCallback(this._delta)},v.prototype.onPointerOver=function(u){},v.prototype.onTouchStart=function(u){var s=u.touches[0].clientX,c=u.touches[0].clientY;this._position={x:s,y:c}},v.prototype.onTouchEnd=function(u){this._position={x:0,y:0},this._delta={x:0,y:0},this._onMoveCallback(this._delta)},v.prototype.onTouchMove=function(u){var s=u.touches[0].clientX,c=u.touches[0].clientY;this._delta={x:s-this._position.x,y:c-this._position.y},this._onMoveCallback(this._delta),this._position={x:s,y:c}},v}();f.PointerDrag=m}),B=L(function(S,f){/**
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2020 Yannick Deubel; Project Url: https://github.com/enable3d/enable3d
 * @license      {@link https://github.com/enable3d/enable3d/blob/master/LICENSE|GNU GPLv3}
 */var m=_&&_.__importStar||function(s){if(s&&s.__esModule)return s;var c={};if(s!=null)for(var o in s)Object.hasOwnProperty.call(s,o)&&(c[o]=s[o]);return c.default=s,c};Object.defineProperty(f,"__esModule",{value:!0}),f.Scene3D=ce.Scene3D,f.Project=he.Project,f.PhysicsLoader=I.PhysicsLoader,f.ExtendedMesh=X.ExtendedMesh,f.ExtendedObject3D=q.ExtendedObject3D,f.ExtendedGroup=J.ExtendedGroup;var v=m(g);f.THREE=v;var u=m(F);f.Types=u,f.JoyStick=de.JoyStick,f.ThirdPersonControls=fe.ThirdPersonControls,f.FirstPersonControls=pe.FirstPersonControls,f.PointerLock=ve.PointerLock,f.PointerDrag=me.PointerDrag}),ye=B.ExtendedObject3D,ge=B.JoyStick;export{ye as ExtendedObject3D,ge as JoyStick};
