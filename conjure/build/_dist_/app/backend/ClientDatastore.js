import*as o from"../../../web_modules/@AssetSync/common/src/datastore-utils.js";import a from"../../../web_modules/uint8arrays/from-string.js";import i from"../../../web_modules/uint8arrays/to-string.js";export default class c{constructor(t){this.assetSync=t}async initialise(){this.database=await this.assetSync.transportPlugin._libp2p.repo.openDatastore("/client")}async get(t){if(!t)return;try{const r=a(t),e=await this.database.get(o.bufferToKey(r)),s=o.decodeRecord(e);return i(s.value)}catch(r){console.log("Datastore: could not get",t," with error",r);return}}async put(t,r){if(!t)return;try{const e=a(t),s=a(r),n=await o.createPutRecord(e,s);return await this.database.put(o.bufferToKey(e),n),!0}catch(e){return console.log("Datastore: could not save",t,r,"with error",e),!1}}async del(t){return this.put(t)}}
