import{isNode as s}from"../web_modules/@AssetSync/common.js";import a from"../web_modules/@AssetSync/WorldSync.js";import{runApp as r}from"./start.js";import{getParams as i}from"./urldecoder.js";async function c(){if(s)r();else{const e=await a({serverFunc:r,canvas:document.getElementById("canvas"),config:{assetSync:!1,urlParams:i(location.href),touchDevice:Boolean("ontouchstart"in window)}});if(e._isRunningInWorker){const{MediaHandler:t}=await import("./media/MediaHandler.js"),o=new t(e);e._peerSync.addEventListener("requestPointerLock",()=>{e._peerSync.canvas.requestPointerLock()}),e._peerSync.addEventListener("exitPointerLock",()=>{document.exitPointerLock()}),e._peerSync.addEventListener("open",(...n)=>{window.open(...n)}),e._peerSync.addRequestOpcode("media",async n=>await o.handle(n))}}}c();
