import s from"../text/TextRenderer3D.js";import{easyPlane as a}from"../../util/MeshTemplates.js";import l from"./ScreenElementBase.js";export default class h extends l{constructor(t,i,e={}){super(t,i,e);this.background=a({width:this.width,height:this.height},{color:2524671}),this.background.castShadow=!1,this.background.receiveShadow=!1,this.background.material.transparent=!0,this.background.material.opacity=.5,this.group.add(this.background),this.isEditing=!1,this.value=1,this.currentValue=1,this.scalerValue=0,this.clickY=0,this.changeType="addition",this.textObj=new s(t.screenManager.conjure,this.group,{text:"0",scale:.75,fit:{x:this.width-.025,y:this.height-.025},...e.textSettings})}getValue(){return this.value}setValue(t){this.value=t,this.currentValue=t,this.setText(t),this.onChangeCallback&&this.onChangeCallback(this.getValue())}setOnChangeCallback(t){this.onChangeCallback=t}updateSlider(t){if(this.disabled)return;if(!this.active)return;this.scalerValue=t,this.currentValue=this.getNewValue(t),this.setText(this.currentValue)}getNewValue(t){return this.changeType==="multiply"?this.getValue()*(1+t):this.getValue()+t}setText(t){this.textObj.setText(Math.round(t*100)/100)}setDefaultValue(t){this.default=t}defaultValue(){console.log("default"),this.default!==void 0?this.setValue(this.default):this.setValue(0),this.updateCallback&&this.updateCallback()}update(t){if(super.update(t),this.disabled)return;if(!this.active)return;t.input.isPressed("MOUSELEFT",!0)&&this.mouseOver&&(t.input.isDown("SHIFT",!0)?this.defaultValue():(this.clickY=t.input.mouse.y,this.isEditing=!0)),t.input.isReleased("MOUSELEFT",!0)&&this.isEditing&&(this.isEditing=!1,this.setValue(this.getNewValue(this.scalerValue)),this.updateCallback&&this.updateCallback()),this.isEditing&&(this.updateSlider(-(this.clickY-t.input.mouse.y)*10),this.updateCallback&&this.updateCallback())}setUpdateCallback(t){this.updateCallback=t}setDisabled(t){super.setDisabled(t)}}
